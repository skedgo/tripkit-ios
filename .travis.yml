language: objective-c
osx_image: xcode9
xcode_workspace: Project/TripKit.xcworkspace
xcode_scheme: TripKit
podfile: Project/Podfile
cache: cocoapods
rvm:
- 2.2.1 # See https://docs.travis-ci.com/user/osx-ci-environment/

before_install:
- echo -e "machine github.com\n  login $CI_USER_TOKEN" >> ~/.netrc
- brew update
- gem install xcpretty --no-rdoc --no-ri --no-document --quiet
- gem install cocoapods
- pod --version

# We use xcodebuild rather than xctool as xctool doesn't play nicely with network requests
script: set -o pipefail && xcodebuild test -workspace Project/TripKit.xcworkspace
  -scheme TripKit -sdk iphonesimulator -destination 'platform=iOS Simulator,name=iPhone
  7' | xcpretty

env:
  matrix:
  - secure: whkK++h4Y+ciX+W/9o96SQoSvkfi2+dtlkeWeCj5emMe2Uk67FTjNK0REaueEkvBvEpGxPnbbLLiEWJAS561Gh2XSKtKgABGVWtrvjk6j2/44ezt689D1/mAf6bDOaHK6N3kwA2qdFAec4JmknCikpLg6WiC7GT1/2oYXgoBz6wA1ai35MnnlLWvopAQq98T0a2B5P3foB4AW7oKtNGNKvvWGXj0+c8ZPcsk6LJNmjrVReAdplg3NFagDWEK2VNd8D79//cvvt5sdmE5a6Dkh83zAgpHewzqe7vtIfLqTUUChgIlOaDGZpWn8boMn0lku6QCH4Rs1szsSII4FuCwEeZWrthUtQiqw8If8cwIrLCKqaItFSJ+MNL2sNe/jDdTmbhnwWjxx8yAqivrwOC86xG/iCGbCX16zpjfwG5CxPWDFjiuJ1mvlFQmRbz02IVYmWyms58zL2RaHXTjewCRrwzxiWZhpoLfLt/zbX6ISDKiuY+TXtc+5DLS1Qgs7gsKxLolCteVqDE++3hsmImMtP/Gf/ojeTaVoHin+WNJV/WQn29xcCFN6erCDp5lQwyY68ygqVpqUwNdTugjw/1iNbd3Oo3/klrXXcOya6ErFlPUQHx5An2VlcpEI/CqcjRAoNQSKRgrFdv0NsQIPAjPGX4PdKWEFpcZ/kLggIUbAiU=
  - secure: r4alEXz4O0nJeiEqxF7dM1OHqDILk/cq1VlBe6kOOEr/hj9boC6bkQdJK9+rsKJnWg7Q5WFo6EigI7orKDrN1rLPePtwwCDlK4vfoWQHNfx3ch5cHK2nDYnTFDYAGT+KAndw3b21NJGGb08XHlKgFuDCR6HLCq6iSYDsMmaCZkFenbeq1E6BqYJAMMMSb6ohx95kJ1nGRms7LGdezqqzPGVG3MwI3Ro6CkXoisqkOUpjMRte4FtKOGwJEXjzEuk/TZjhUBhTOB+2kR2EDsN3VKncJPwdN/l3V//Rh0jF+g93glENPJK9VSGIEnmA24HdVvTaDdOb2ovL5gD3HIY8tsBI4gELkblGaOHcICw1AyN/MdEX/6LizQek5R2KN3QRU7elw/CB2JTTHWAS9teZf1f8seFfSkHuAH5z9oQDyXvZhCsb1g1IXBkHahfqvTXkYdZo7Fz6Y1nmneErfD8fmMPYYOovm0gPqVfDZTQLYW+cEhSTfx5Hn8y9o1sYL0IAibIOFityQ4s8phm99pEES3Qa+XFasSceETyyMpW23dUHyPuExJ7hpggrZb9IEYmgD3SOfGPks9F40CKOVYG2CKiXntAjMiIIH8fGro/OCb26XXFdgK6vRqqm2Yyk7DZpst3B89EcfGVg5e5DODVlC/WDS+T1eaUb55U86xTHbiI=
  - secure: HXYZ3tCr0FBnp3s7RCyNEkhpeH1caxv0O/CqBdIk3IOdZRhb6x7vFiNbHvA1nEq4XmIBEshTWkJFwuqNbJvN2/2g/nlVhMEYztKPOqg3ex8t02zboP61Kz6wNmrdW0BnWqr/+LZikc7aAfn9H9ROj2B389IKJ5bZXF79BRJK/MZARIouV1WNO9CIVAKjC7vlJc4L/VLLm0fz+NLms0Tt0gZmaxYfLpZB2AhoCp44TBoftgUWmz4YaMuQh6UD78bORB+9kqB84vbuQL5s2qtrjrCaY0KXKcZAiFHXLYcHF0h8DE3cSuQ+pohOJ1hCJjOivOqhr3x6HMsTsHcrGC11BrZ5UFKPtZ2eEbA8mF1Wf9YCiW9JiEuDWEc62JdAogMAW1dTe+q9v5evTiJxAN0tRkGI74bMtq43vETr5XXrJeXAy9Rs1XXac8t6Het/3iqHzcMSpU7rUeVxH7z9jB4uHIjTS6zW4SUObFHDcAA/nJJGuX4zUDrcbMikzIE1ex389bfunH097O+Zc+SD22FKba8sOqsUksuisVov1qA2N72SWXfrBA5i5AmYyHN0npOYarvFTYDyakqQsUeNr5ZuChuJYXrh4mn7UPRqo57bfiz194+/d102h1STPsvddy0SLB/+WhB85DgYttWkBFUL/8T1PYhKkxC1xVKGiQQdPo8=
